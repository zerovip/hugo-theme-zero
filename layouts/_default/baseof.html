<!DOCTYPE html>
<html class="theme-container">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=divice-width, initial-scale=1.0">
    {{ hugo.Generator }}
    <title>
        {{ block "head_title" . }}{{ end }} | {{ .Site.Title }}
    </title>

    <!-- CSS 外链，进行了小屏幕的适配 -->
    <!-- 使用了 Hugo Pipes 来 minify 静态文件 -->
    {{ $style_base := resources.Get "css/base.css" | minify | fingerprint }}
    {{ $style_small := resources.Get "css/small.css" | minify | fingerprint }}
    {{ $style_normal := resources.Get "css/normal.css" | minify | fingerprint }}
    <link rel="stylesheet" type="text/css" href="{{ $style_base.Permalink }}" />
    <link rel="stylesheet" media="screen and (max-width: 1200px)"
        type="text/css" href="{{ $style_small.Permalink }}" />
    <link rel="stylesheet" media="screen and (min-width: 1201px)"
        type="text/css" href="{{ $style_normal.Permalink }}" />

    <!-- 主题颜色深浅的外链 js -->
    <!-- 使用了 Hugo Pipes 来 minify 静态文件 -->
    {{ $cthemeJs := resources.Get "js/ctheme.js" | minify | fingerprint }}
    <script type="text/javascript" src="{{ $cthemeJs.Permalink }}"></script>

    <!-- highlight 自动生成配色 -->
    {{ $style_syntax := resources.Get "css/syntax.css" | minify | fingerprint }}
    <link rel="stylesheet" type="text/css" href="{{ $style_syntax.Permalink }}" />

    <!-- 加入 heti（赫蹏）来美化排版，见：https://sivan.github.io/heti/ -->
    <!--     GitHub：https://github.com/sivan/heti -->
    <!-- <link rel="stylesheet" href="//unpkg.com/heti/umd/heti.min.css"> -->

    <!--Google Analytics 部分以及 GoatCounter 部分-->
    {{ if not .Site.IsServer }}
        {{ template "_internal/google_analytics_async.html" . }}
        <script data-goatcounter="https://{{ .Param "GoatCounterName" }}.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
    {{ end }}
</head>

<body>
<!--MathJax 的引用-->
{{ if (and .IsPage (eq .Params.markup "pandoc")) }}
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" async></script>
    <script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js"></script>
{{ end }}

<!--小屏幕顶部设计，在宽屏幕中不显示-->
<nav class='bar_for_phone'>
    <div class='bar_left_button'>
        <div class='left_button_for_bar' onclick="ChangeClassLeft()">
            <div class="bar1"></div>
            <div class="bar2"></div>
            <div class="bar3"></div>
        </div>
    </div>
    <div class='bar_title'>
        <a href="{{ "/" | relLangURL }}">{{ .Site.Title }}</a>
    </div>
    <div class='bar_right_button'>
        {{ block "bar_toc" . }}{{ end }}
    </div>
</nav>

<!-- 网页端主体-->
<div class='body_for_pc'>
    <!--左边栏-->
    <aside class='left' id='left'>
        <!--非页脚区-->
        <div class='left_non-footer'>
            <!--选项区-->
            <div class='left_non-footer_option'>
                <!-- 主题切换部分 -->
                <div role="checkbox" class='left_non-footer_option_theme-switch'>
                    <label class="switch">
                        <input type="checkbox" class="theme-switcher"
                            onchange="themeSwitch()">
                        <!-- 是明亮模式嘛？checked 为明亮模式. -->
                        <span class="slider round"></span>
                    </label>
                </div>

                <!-- 语言选项部分 -->
                <ul role="radiogroup" class='left_non-footer_option_language'>
                    {{ $curr_page := . }}
                    {{ $curr_lang := $curr_page.Language.Lang }}
                    {{ $curr_trans_dict := dict }}
                    {{ range $curr_page.Translations }}
                        {{ $curr_trans_dict = merge $curr_trans_dict
                            (dict .Language.Lang .Permalink)
                        }}
                    {{ end }}
                    {{ range $.Site.Home.AllTranslations }}
                        {{ if (eq .Language.Lang $curr_lang) }}
                            <li role="radio" aria-checked="true" class='left_non-footer_option_active'>
                                {{ .Language.LanguageName }} ⦿ 
                            </li>
                        {{ else }}
                            {{ if (index $curr_trans_dict .Language.Lang) }}
                                <li role="radio" aria-checked="false" class='left_non-footer_option_non-active'>
                                    <a href="{{ index $curr_trans_dict .Language.Lang }}">
                                        {{ .Language.LanguageName }} ○ 
                                    </a>
                                </li>
                            {{ else }}
                                <li role="radio" aria-checked="disabled" class='left_non-footer_option_non-active'>
                                    {{ .Language.LanguageName }} ⨂ 
                                </li>
                            {{ end }}
                        {{ end }}
                    {{ end }}
                </ul>

                <!-- RSS 订阅按钮 -->
                <div role="button" class='left_non-footer_option_rss'>
                {{ if .IsNode }}
                    <li class='left_non-footer_option_active'>
                        <a href="{{ .Permalink }}index.xml">
                            {{ i18n "rss_feed" }}
                            <img src="/images/rss.png" />
                        </a>
                    </li>
                {{ else }}
                    <li class='left_non-footer_option_non-active'>
                        {{ i18n "rss_feed" }} ⊠ 
                    </li>
                {{ end }}
                </div>
            </div>
                
            <!--题目区-->
            <header class='left_non-footer_head'>
                <div class='left_non-footer_head_title'>
                    <a href="{{ "/" | relLangURL }}">
                        {{ .Site.Title }}
                    </a>
                </div>
                <div class='left_non-footer_head_subtitle'>(●’◡’●)ﾉ</div>
            </header>

            <!--导航区-->
            <!--这里独创的有
                {{/* if eq .Identifier (path.Base $currentNode.RelPermalink) */}}active{{/* end */}}
                它是等价于网上找到的下面这一行的
                {{/* if or ($currentNode.IsMenuCurrent "main" .) ($currentNode.HasMenuCurrent "main" .) */}}active{{/* end */}}
            -->
            <nav class='left_non-footer_main'>
                {{ $currentNode := . }}
                {{ range .Site.Menus.main }} {{/* 确保和config中的一级标题的主菜单一致，下面也是 */}}
                    <div  class="h1 {{ if eq .Identifier (path.Base $currentNode.RelPermalink) |
                    or (eq .Identifier $currentNode.Section) }}active{{ end }}">
                        <a href="{{ .URL }}">{{ .Name }}</a>
                    </div>
                    {{ if .HasChildren }}
                        {{ range .Children }}
                            {{ if ne .Identifier ""}}
                                <div class="h2 {{ if eq .Identifier (path.Base $currentNode.RelPermalink) |
                                or (eq .Identifier $currentNode.Params.section) }}active{{ end }}">
                                    <a href="{{ .URL }}">{{ .Name }} </a>
                                </div>
                            {{ end }}
                        {{ end }}
                    {{ end }}
                {{end}}
            </nav>

        </div>
        <!--页脚版权区-->
        <footer class='left_footer'>
            <div class='copyright'>©2019-{{ now.Format "2006" }} {{ i18n "copyright" }}</div>
        </footer>
    </aside>

    <!--右边主要部分-->
    <div class='right' onclick="HideBothSide()">
        {{ block "right_head" . }}{{ end }}
        {{ block "right_main" . }}{{ end }}
    </div>

    <!--目录部分-->
    {{ block "toc" . }}{{ end }}
</div>

<!-- 外链 js -->
<!-- 使用了 Hugo Pipes 来 minify 静态文件 -->
{{ $mainJs := resources.Get "js/main.js" | minify | fingerprint }}
<script type="text/javascript" src="{{ $mainJs.Permalink }}"></script>

<!-- 加入 heti（赫蹏）来美化排版，见：https://sivan.github.io/heti/ -->
<!--     GitHub：https://github.com/sivan/heti -->
<!-- <script src="//unpkg.com/heti/umd/heti-addon.min.js"></script> -->
<!-- <script> -->
<!--     const heti = new Heti('.heti'); -->
<!--     heti.autoSpacing(); // 自动进行中西文混排美化和标点挤压 -->
<!-- </script> -->

</body>
</html>
